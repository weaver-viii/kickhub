#+TITLE: Redis db specs

* Globals

| Status | Key Name     | Type | Value    | Description          |
|--------+--------------+------+----------+----------------------|
| Done   | users        | list | (1, ...) | list of users        |
| Done   | projects     | list | (1, ...) | list of projects     |
| Done   | transactions | list | (1, ...) | list of transactions |
|--------+--------------+------+----------+----------------------|
| TODO   | devs         | list | (1, ...) | list of developers   |
| TODO   | donators     | list | (1, ...) | list of donators     | 

Developers and donators are both subsets of users.

A user becomes a /donator/ when a transaction he committed to do is
confirmed by another user.

A user becomes a developer when she publishes a new project.

* Users

| Status | Key Name         | Type   | Example value               | Description                                  |
|--------+------------------+--------+-----------------------------+----------------------------------------------|
| Done   | global:uid       | string | 1                           |                                              |
| Done   | uid:1            | hash   | {u: p: e: picurl: created:} |                                              |
| Done   | user:bzg:uid     | string | 1                           | get the uid from user's name                 |
| Done   | users            | list   | (1, ...)                    |                                              |
| Done   | uid:1:apid       | set    | {1, 2}                      | set of projects for which user is admin      |
| Done   | uid:1:atid       | set    | {1, 2}                      | set of transactions for which user is author |
| Done   | uid:1:auth       | string | 3b7b0677...                 | get the auth key for a user                  |
| Done   | auth:3b7b0677... | string | 2                           | get the user for a auth key                  |

* Projects

| Status | Key Name         | Type   |        Example value | Description            |
|--------+------------------+--------+----------------------+------------------------|
| Done   | global:pid       | string |                    1 | project identifier     |
| Done   | projects         | list   |             (1, ...) | list of projects       |
| Done   | project:test:pid | string |                    1 | pid of project "test"  |
| Done   | pid:1            | hash   | {name: created: by:} | project properties     |
| Done   | pid:1:auid       | string |                    1 | The uid of pid's admin |

* Transactions

| Status | Key Name         | Type   | Example value          | Description                        |
|--------+------------------+--------+------------------------+------------------------------------|
| Done   | global:tid       | string | 1                      | transaction identifier             |
| Done   | transactions     | list   | (1, ...)               | list of transactions               |
| Done   | tid:1            | hash   | {created: by: amount:} | transaction properties of tid      |
| Done   | tid:1:auid       | string | 1                      | the author uid of transaction tid  |
| Done   | tid:1:auth       | string | 3b7b0677...            | the auth key of  transaction tid   |
| Done   | auth:3b7b0677... | string | 2                      | get the transaction for a auth key |

* News

| Status | Key Name   | Type   | Example value     | Description         |
|--------+------------+--------+-------------------+---------------------|
| Done   | global:nid | string | 1                 | news identifier     |
| Done   | news       | list   | (1, ...)          | list of news        |
| Done   | nid:1      | hash   | {type: date: ...} | properties for news | 

* Notes  

Don't implement "followers" before making sure that using Github graph
of followers is not enough.

